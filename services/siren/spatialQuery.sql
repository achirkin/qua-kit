-- test query!
SELECT create_scenario('Great Scenario', '{"type": "FeatureCollection", "features": [{"type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [950595.989999999990687, 6002245.769999999552965, 950664.880000000004657, 6002318.040000000037253], "type": "Polygon", "coordinates": [[[950595.99, 6002292.88], [950596.07, 6002295.83], [950596.43, 6002299.15], [950598.88, 6002302.67], [950624.2, 6002310.17], [950649.27, 6002318.04], [950656.98, 6002287.09], [950664.88, 6002256.12], [950625.48, 6002245.77], [950595.99, 6002292.88]]]}, "properties": {"geomID": 32233957, "z_order": 0, "building": "yes", "way_area": 3149.87}},{"type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [950595.989999999990687, 6002245.769999999552965, 950664.880000000004657, 6002318.040000000037253], "type": "Polygon", "coordinates": [[[950595.99, 6002292.88], [950596.07, 6002295.83], [950596.43, 6002299.15], [950598.88, 6002302.67], [950624.2, 6002310.17], [950649.27, 6002318.04], [950656.98, 6002287.09], [950664.88, 6002256.12], [950625.48, 6002245.77], [950595.99, 6002292.88]]]}, "properties": {"z_order": 0, "building": "yes", "way_area": 3149.87}},{"id": 12, "type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [950595.989999999990687, 6002245.769999999552965, 950664.880000000004657, 6002318.040000000037253], "type": "Polygon", "coordinates": [[[950595.99, 6002292.88], [950596.07, 6002295.83], [950596.43, 6002299.15], [950598.88, 6002302.67], [950624.2, 6002310.17], [950649.27, 6002318.04], [950656.98, 6002287.09], [950664.88, 6002256.12], [950625.48, 6002245.77], [950595.99, 6002292.88]]]}, "properties": {"z_order": 0, "building": "yes", "way_area": 3149.87}},{"type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [950595.989999999990687, 6002245.769999999552965, 950664.880000000004657, 6002318.040000000037253], "type": "Polygon", "coordinates": [[[950595.99, 6002292.88], [950596.07, 6002295.83], [950596.43, 6002299.15], [950598.88, 6002302.67], [950624.2, 6002310.17], [950649.27, 6002318.04], [950656.98, 6002287.09], [950664.88, 6002256.12], [950625.48, 6002245.77], [950595.99, 6002292.88]]]}, "properties": {"z_order": 0, "building": "yes", "way_area": 3149.87}}, {"id": 5, "type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [949748.439999999944121, 6002121.940000000409782, 950896.020000000018626, 6003940.440000000409782], "type": "Polygon", "coordinates": [[[949748.44, 6003014.51], [949833.69, 6003199.1], [949897.44, 6003342.2], [950004.94, 6003503.8], [950082.04, 6003609.07], [950193.97, 6003536.41], [950225.86, 6003652.07], [950253.28, 6003642.42], [950297.77, 6003741.76], [950446.03, 6003940.44], [950509.05, 6003915.24], [950492.73, 6003870.02], [950739.61, 6003775.13], [950752.21, 6003809.23], [950827.08, 6003809.97], [950861.18, 6003655.03], [950870.82, 6003594.98], [950853.76, 6003483.78], [950737.38, 6003499.34], [950705.5, 6003475.62], [950701.79, 6003402.24], [950875.27, 6003397.05], [950868.59, 6003365.92], [950889.35, 6003286.59], [950870.82, 6003199.1], [950870.07, 6003126.47], [950867.86, 6003026.38], [950874.52, 6003027.86], [950880.46, 6002755.79], [950871.56, 6002653.49], [950896.02, 6002653.49], [950885.65, 6002557.86], [950857.47, 6002253.91], [950818.92, 6002250.21], [950809.29, 6002300.62], [950658.8, 6002273.19], [950674.36, 6002222.04], [950635.08, 6002204.98], [950661.03, 6002157.53], [950603.94, 6002121.94], [950403.78, 6002451.85], [950363.75, 6002498.54], [950320.74, 6002518.56], [950165.81, 6002531.91], [950078.33, 6002724.66], [950153.21, 6002802.49], [950113.18, 6002834.38], [950025.69, 6002971.53], [949960.4, 6002990.94], [949966.39, 6003018.23], [949839.62, 6003084.21], [949784.02, 6002988.57], [949748.44, 6003014.51]]]}, "properties": {"landuse": "residential", "z_order": 0, "way_area": 1191190}}], "properties" : {"ScenarioProp1": 162, "asgas": null, "Hello" : "World"}}');


SELECT update_scenario(17, '{"type": "FeatureCollection", "features": [{"type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [950595.989999999990687, 6002245.769999999552965, 950664.880000000004657, 6002318.040000000037253], "type": "Polygon", "coordinates": [[[950595.99, 6002292.88], [950596.07, 6002295.83], [950596.43, 6002299.15], [950598.88, 6002302.67], [950656.98, 6002287.09], [950664.88, 6002256.12], [950625.48, 6002245.77], [950595.99, 6002292.88]]]}, "properties": {"geomID": 32233957, "z_order": 0, "building": "yes", "way_area": 3149.87, "deleted_geomIDs": [182,2]}},{"type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [950595.989999999990687, 6002245.769999999552965, 950664.880000000004657, 6002318.040000000037253], "type": "Polygon", "coordinates": [[[950595.99, 6002292.88], [950596.07, 6002295.83], [950596.43, 6002299.15], [950598.88, 6002302.67], [950624.2, 6002310.17], [950649.27, 6002318.04], [950656.98, 6002287.09], [950664.88, 6002256.12], [950625.48, 6002245.77], [950595.99, 6002292.88]]]}, "properties": {"z_order": 0, "building": "yes", "way_area": 3149.87}},{"id": 12, "type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [950595.989999999990687, 6002245.769999999552965, 950664.880000000004657, 6002318.040000000037253], "type": "Polygon", "coordinates": [[[950595.99, 6002292.88], [950596.07, 6002295.83], [950596.43, 6002299.15], [950598.88, 6002302.67], [950624.2, 6002310.17], [950649.27, 6002318.04], [950656.98, 6002287.09], [950664.88, 6002256.12], [950625.48, 6002245.77], [950595.99, 6002292.88]]]}, "properties": {"z_order": 0, "building": "yes", "way_area": 3149.87}},{"type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [950595.989999999990687, 6002245.769999999552965, 950664.880000000004657, 6002318.040000000037253], "type": "Polygon", "coordinates": [[[950595.99, 6002292.88], [950596.07, 6002295.83], [950596.43, 6002299.15], [950598.88, 6002302.67], [950624.2, 6002310.17], [950649.27, 6002318.04], [950656.98, 6002287.09], [950664.88, 6002256.12], [950625.48, 6002245.77], [950595.99, 6002292.88]]]}, "properties": {"z_order": 0, "building": "yes", "way_area": 3149.87}}, {"id": 5, "type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [949748.439999999944121, 6002121.940000000409782, 950896.020000000018626, 6003940.440000000409782], "type": "Polygon", "coordinates": [[[949748.44, 6003014.51], [949833.69, 6003199.1], [949897.44, 6003342.2], [950004.94, 6003503.8], [950082.04, 6003609.07], [950193.97, 6003536.41], [950225.86, 6003652.07], [950253.28, 6003642.42], [950297.77, 6003741.76], [950446.03, 6003940.44], [950509.05, 6003915.24], [949784.02, 6002988.57], [949748.44, 6003014.51]]]}, "properties": {"landuse": "residential", "z_order": 0, "way_area": 1191190}},{"type": "Feature", "properties": {"deleted_geomIDs": [18,232,12]}}], "properties" : {"ScenarioProp1": null, "asgas": 42, "Hello" : "Nothing"}}');


SELECT update_scenario(2, '{"type": "FeatureCollection", "features": [{"type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [950595.989999999990687, 6002245.769999999552965, 950664.880000000004657, 6002318.040000000037253], "type": "Polygon", "coordinates": [[[950595.99, 6002292.88], [950596.07, 6002295.83], [950596.43, 6002299.15], [950598.88, 6002302.67], [950656.98, 6002287.09], [950664.88, 6002256.12], [950625.48, 6002245.77], [950595.99, 6002292.88]]]}, "properties": {"geomID": 32233957, "z_order": 0, "building": "yes", "way_area": 3149.87, "deleted_geomIDs": [182,2]}},{"type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [950595.989999999990687, 6002245.769999999552965, 950664.880000000004657, 6002318.040000000037253], "type": "Polygon", "coordinates": [[[950595.99, 6002292.88], [950596.07, 6002295.83], [950596.43, 6002299.15], [950598.88, 6002302.67], [950624.2, 6002310.17], [950649.27, 6002318.04], [950656.98, 6002287.09], [950664.88, 6002256.12], [950625.48, 6002245.77], [950595.99, 6002292.88]]]}, "properties": {"z_order": 0, "building": "yes", "way_area": 3149.87}},{"id": 12, "type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [950595.989999999990687, 6002245.769999999552965, 950664.880000000004657, 6002318.040000000037253], "type": "Polygon", "coordinates": [[[950595.99, 6002292.88], [950596.07, 6002295.83], [950596.43, 6002299.15], [950598.88, 6002302.67], [950624.2, 6002310.17], [950649.27, 6002318.04], [950656.98, 6002287.09], [950664.88, 6002256.12], [950625.48, 6002245.77], [950595.99, 6002292.88]]]}, "properties": {"z_order": 0, "building": "yes", "way_area": 3149.87}},{"type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [950595.989999999990687, 6002245.769999999552965, 950664.880000000004657, 6002318.040000000037253], "type": "Polygon", "coordinates": [[[950595.99, 6002292.88], [950596.07, 6002295.83], [950596.43, 6002299.15], [950598.88, 6002302.67], [950624.2, 6002310.17], [950649.27, 6002318.04], [950656.98, 6002287.09], [950664.88, 6002256.12], [950625.48, 6002245.77], [950595.99, 6002292.88]]]}, "properties": {"z_order": 0, "building": "yes", "way_area": 3149.87}}, {"id": 5, "type": "Feature", "geometry": {"crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:spatialreferencing.org::900913"}}, "bbox": [949748.439999999944121, 6002121.940000000409782, 950896.020000000018626, 6003940.440000000409782], "type": "Polygon", "coordinates": [[[949748.44, 6003014.51], [949833.69, 6003199.1], [949897.44, 6003342.2], [950004.94, 6003503.8], [950082.04, 6003609.07], [950193.97, 6003536.41], [950225.86, 6003652.07], [950253.28, 6003642.42], [950297.77, 6003741.76], [950446.03, 6003940.44], [950509.05, 6003915.24], [949784.02, 6002988.57], [949748.44, 6003014.51]]]}, "properties": {"landuse": "residential", "z_order": 0, "way_area": 1191190}},{"type": "Feature", "properties": {"deleted_geomIDs": [18,232,12]}}], "properties" : {"ScenarioProp1": null, "asgas": 42, "Hello" : "Nothing"}}');
